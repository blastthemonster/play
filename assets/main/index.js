window.__require=function t(e,o,n){function i(r,s){if(!o[r]){if(!e[r]){var a=r.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!s&&l)return l(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var p=o[r]={exports:{}};e[r][0].call(p.exports,function(t){return i(e[r][1][t]||t)},p,p.exports,t,e,o,n)}return o[r].exports}for(var c="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({Activator:[function(t,e,o){"use strict";cc._RF.push(e,"933feMFui9HDq5L8YQa4t9g","Activator");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Global/Utils"),a=t("../Level/Pin"),l=t("./Obstacle"),p=cc._decorator,d=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.button=null,e.pressed=!1,e.colorIndex=0,e.prevButtonDistance=0,e}var o;return i(e,t),o=e,e.prototype.onCreate=function(t,e){this.point1=t,this.point2=e;var o=e.sub(t);this.node.setPosition(t);var n=-o.signAngle(cc.Vec2.RIGHT);this.node.angle=cc.misc.radiansToDegrees(n),this.combine(),r.default.instance.levelEditor.editing&&this.playRandomSound(this.dragSounds),this.unparentButton()},e.prototype.update=function(){var t,e=this.node.getPosition().sub(this.button.getPosition()).magSqr();this.pressed?e>2e3&&(this.pressed=!1):this.prevButtonDistance!=e&&(e<1e3&&this.prevButtonDistance>1e3&&(cc.audioEngine.playEffect(this.dropSounds[0],!1),null===(t=this.target)||void 0===t||t.activate(),this.pressed=!0),this.prevButtonDistance=e)},e.prototype.bindTarget=function(t){this.target=t,t.coloredNode.color=this.getColor(this.colorIndex),t.target=this},e.prototype.unbindTarget=function(){this.target.coloredNode.color=this.target.defaultColor,this.target.target=null,this.target=null},e.prototype.combine=function(){for(var t,e=r.default.instance.levelEditor.obstacles,n=4;n<e.length-1;n++){var i=e[n];i.interactive&&(i instanceof o?this.colorIndex=i.colorIndex+1:null==i.target&&(t=i)),s.default.minDistanceBetweenLineAndPoint(i.point1,i.point2,this.point1)<16&&a.default.create(this,i,this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),a.PinType.Weld)}null!=t&&this.bindTarget(t),this.coloredNode.color=this.getColor(this.colorIndex)},e.prototype.onTouchStart=function(e){t.prototype.onTouchStart.call(this,e);var n=this.button.parent.convertToWorldSpaceAR(this.button.getPosition());this.button.setParent(this.node),this.button.angle=0,this.button.setSiblingIndex(0),this.button.setPosition(this.node.convertToNodeSpaceAR(n)),null!=this.target&&(console.log(typeof this.target),this.unbindTarget());for(var i=r.default.instance.levelEditor.obstacles,c=0,s=4;s<i.length-1;s++){var a=i[s];a instanceof o&&(a.colorIndex=c,a.coloredNode.color=this.getColor(c),null!=a.target&&(a.target.coloredNode.color=a.coloredNode.color),c++)}this.colorIndex=c,this.coloredNode.color=this.getColor(this.colorIndex)},e.prototype.onEndDrag=function(e){t.prototype.onEndDrag.call(this,e),this.unparentButton()},e.prototype.unparentButton=function(){var t=this.node.convertToWorldSpaceAR(this.button.getPosition());this.button.setParent(this.node.parent),this.button.angle=this.node.angle,this.button.setSiblingIndex(this.node.getSiblingIndex()),this.button.setPosition(this.node.parent.convertToNodeSpaceAR(t))},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.button.destroy()},e.prototype.getColor=function(t){var e=cc.Color.WHITE;switch(t){default:return e;case 0:return cc.Color.fromHEX(e,"#DB3D3D");case 1:return cc.Color.fromHEX(e,"#3D69DB");case 2:return cc.Color.fromHEX(e,"#D3B100");case 3:return cc.Color.fromHEX(e,"#29B61D");case 4:return cc.Color.fromHEX(e,"#E96D1A");case 5:return cc.Color.fromHEX(e,"#5C149E");case 6:return cc.Color.fromHEX(e,"#191919");case 7:return cc.Color.fromHEX(e,"#47A9C2")}},c([u(cc.Node)],e.prototype,"button",void 0),o=c([d],e)}(l.default);o.default=h,cc._RF.pop()},{"../Game":"Game","../Global/Utils":"Utils","../Level/Pin":"Pin","./Obstacle":"Obstacle"}],Background:[function(t,e,o){"use strict";cc._RF.push(e,"34e64TYTCJKX6Sje28l5XzL","Background");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.camera=null,e.followRatioX=.5,e.followRatioY=.25,e}return i(e,t),e.prototype.onLoad=function(){this.backgroundWidth=this.getComponent(cc.Sprite).spriteFrame.getTexture().width,0==this.backgroundWidth&&(this.backgroundWidth=1500)},e.prototype.start=function(){this.previousPosition=this.camera.getPosition()},e.prototype.update=function(){var t=this.previousPosition.sub(this.camera.getPosition()),e=cc.v3(t.x*this.followRatioX,t.y*this.followRatioY,0);this.node.setPosition(this.node.position.sub(e)),this.previousPosition=this.camera.getPosition();var o=this.camera.position.x-this.node.position.x;o>this.backgroundWidth?this.node.setPosition(this.node.position.add(cc.v3(this.backgroundWidth,0,0))):o<-this.backgroundWidth&&(this.node.setPosition(this.node.position.sub(cc.v3(this.backgroundWidth,0,0))),o=0)},c([a(cc.Node)],e.prototype,"camera",void 0),c([a()],e.prototype,"followRatioX",void 0),c([a()],e.prototype,"followRatioY",void 0),c([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],CameraController:[function(t,e,o){"use strict";cc._RF.push(e,"c8e94aN/SRDr4C2fEWnbbfx","CameraController");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.camera=null,e.anim=null,e.jumpZoom=!1,e.centerAtStart=!1,e.smoothFollow=!1,e.followX=0,e.followY=0,e.minFollowDist=0,e.followRatio=0,e.overview=!1,e.overviewTargets=[],e.overviewMargin=0,e.speedZoom=!1,e.zoomInSpeed=0,e.zoomOutSpeed=0,e.canShake=!1,e.shakeDuration=0,e.pointerPan=!1,e.pointerXMult=0,e.pointerYMult=0,e.useBoundaries=!1,e.topBound=0,e.bottomBound=0,e.leftBound=0,e.rightBound=0,e.startFollow=!1,e.visibleSize=cc.Size.ZERO,e.initZoomRatio=1,e}return i(e,t),e.prototype.onLoad=function(){this.startFollow=!1;var t=cc.find("Canvas").getComponent(cc.Canvas);this.visibleSize=cc.view.getVisibleSize(),this.initZoomRatio=this.camera.zoomRatio,this.centerAtStart&&(this.node.position=this.target.convertToWorldSpaceAR(cc.Vec3.ZERO)),this.previousPos=this.node.position,this.pointerPan&&(this.overview=!1,this.speedZoom=!1,t.node.on("mousemove",this.onMouseMove,this),t.node.on("touchmove",this.onTouchMove,this),this.pointerPos=null),this.overview&&(this.jumpZoom=!1,this.speedZoom=!1),this.speedZoom&&(this.jumpZoom=!1)},e.prototype.lateUpdate=function(t){var e;if(e=this.overview?this.target.parent.convertToWorldSpaceAR(this.getOverviewTargetsMidpoint()):this.target.parent.convertToWorldSpaceAR(this.target.position),this.pointerPan&&this.pointerPos){var o=this.pointerPos.x/(this.visibleSize.width/2)-1,n=this.pointerPos.y/(this.visibleSize.height/2)-1;o*=this.pointerXMult,n*=this.pointerYMult,e=e.add(cc.v2(o,n))}if(this.smoothFollow?((Math.abs(e.x-this.node.x)>=this.followX||Math.abs(e.y-this.node.y)>=this.followY)&&(this.startFollow=!0),this.startFollow&&(this.node.position=this.node.position.lerp(e,this.followRatio),cc.Vec3.distance(e,this.node.position)<=this.minFollowDist&&(this.startFollow=!1))):this.node.position=this.node.parent.convertToNodeSpaceAR(e),this.speedZoom){var i=Math.abs(this.previousPos.x-e.x)/t,c=0;if(i>this.zoomOutSpeed){var r=(i-this.zoomOutSpeed)/(this.zoomInSpeed-this.zoomOutSpeed);c=1-cc.misc.clampf(r,.4,1),this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,c,.02)}else this.camera.zoomRatio=cc.misc.lerp(this.camera.zoomRatio,this.initZoomRatio,.02)}if(this.previousPos=e,this.jumpZoom&&(c=e.y/cc.winSize.height,this.camera.zoomRatio=1+.35*(.6-c)),this.useBoundaries){var s=this.visibleSize.width/2/this.camera.zoomRatio,a=this.visibleSize.height/2/this.camera.zoomRatio,l=this.node.x-s,p=this.node.x+s,d=this.node.y-a,u=this.node.y+a;l<this.leftBound&&(this.node.x=this.leftBound+s),d<this.bottomBound&&(this.node.y=this.bottomBound+a),p>this.rightBound&&(this.node.x=this.rightBound-s),u>this.topBound&&(this.node.y=this.topBound-a)}},e.prototype.getOverviewTargetsMidpoint=function(){for(var t=cc.v2(0,0),e=99999,o=99999,n=-99999,i=-99999,c=0;c<this.overviewTargets.length;++c){var r=this.overviewTargets[c],s=r.parent.convertToWorldSpaceAR(r.position);n=s.x>n?s.x:n,e=s.x<e?s.x:e,i=s.y>i?s.y:i,o=s.y<o?s.y:o}n+=this.overviewMargin,e-=this.overviewMargin,i+=this.overviewMargin,o-=this.overviewMargin;var a=Math.abs(n-e),l=Math.abs(i-o);t=cc.v2(e+a/2,o+l/2);var p=Math.max(a/this.visibleSize.width,l/this.visibleSize.height);return this.camera.zoomRatio=cc.misc.clampf(1/p,.3,1),t},e.prototype.shakeCamera=function(){this.canShake&&(this.anim.play("shake"),this.scheduleOnce(this.stopShake.bind(this),this.shakeDuration))},e.prototype.stopShake=function(){this.anim.stop(),this.camera.node.position=cc.Vec3.ZERO},e.prototype.onMouseMove=function(t){this.pointerPos=t.getLocation()},e.prototype.onTouchMove=function(t){this.pointerPos=t.getLocation()},c([a(cc.Node)],e.prototype,"target",void 0),c([a(cc.Camera)],e.prototype,"camera",void 0),c([a(cc.Animation)],e.prototype,"anim",void 0),c([a],e.prototype,"jumpZoom",void 0),c([a],e.prototype,"centerAtStart",void 0),c([a],e.prototype,"smoothFollow",void 0),c([a({visible:function(){return this.smoothFollow}})],e.prototype,"followX",void 0),c([a({visible:function(){return this.smoothFollow}})],e.prototype,"followY",void 0),c([a({visible:function(){return this.smoothFollow}})],e.prototype,"minFollowDist",void 0),c([a({visible:function(){return this.smoothFollow}})],e.prototype,"followRatio",void 0),c([a()],e.prototype,"overview",void 0),c([a([cc.Node]),a({visible:function(){return this.overview}})],e.prototype,"overviewTargets",void 0),c([a({visible:function(){return this.overview}})],e.prototype,"overviewMargin",void 0),c([a],e.prototype,"speedZoom",void 0),c([a({visible:function(){return this.speedZoom}})],e.prototype,"zoomInSpeed",void 0),c([a({visible:function(){return this.speedZoom}})],e.prototype,"zoomOutSpeed",void 0),c([a],e.prototype,"canShake",void 0),c([a({visible:function(){return this.canShake}})],e.prototype,"shakeDuration",void 0),c([a],e.prototype,"pointerPan",void 0),c([a({visible:function(){return this.pointerPan}})],e.prototype,"pointerXMult",void 0),c([a({visible:function(){return this.pointerPan}})],e.prototype,"pointerYMult",void 0),c([a],e.prototype,"useBoundaries",void 0),c([a({visible:function(){return this.useBoundaries}})],e.prototype,"topBound",void 0),c([a({visible:function(){return this.useBoundaries}})],e.prototype,"bottomBound",void 0),c([a({visible:function(){return this.useBoundaries}})],e.prototype,"leftBound",void 0),c([a({visible:function(){return this.useBoundaries}})],e.prototype,"rightBound",void 0),c([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Cannon:[function(t,e,o){"use strict";cc._RF.push(e,"8075f8VRfFCM6ahhNnrEGmW","Cannon");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("./Obstacle"),a=cc._decorator,l=a.ccclass,p=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cannonBall=null,e.shotEffect=null,e.barrelEnd=null,e.charged=!0,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.charged=!0},e.prototype.onCreate=function(t,e){this.point1=t,this.point2=e;var o=e.sub(t);this.node.setPosition(t);var n=-o.signAngle(cc.Vec2.RIGHT);this.node.angle=cc.misc.radiansToDegrees(n),this.combine(),r.default.instance.levelEditor.editing&&this.playRandomSound(this.dragSounds)},e.prototype.onExplosionDamage=function(){this.scheduleOnce(this.shot,.01)},e.prototype.activate=function(){this.shot()},e.prototype.shot=function(){if(this.charged){var t=cc.v2(this.node.right).mul(1e6),e=cc.instantiate(this.shotEffect);e.setParent(this.node.parent);var o=this.node.convertToWorldSpaceAR(this.barrelEnd.getPosition());e.setPosition(this.node.parent.convertToNodeSpaceAR(o)),this.cannonBall.active?(this.cannonBall=cc.instantiate(this.cannonBall),this.cannonBall.setParent(this.node),this.cannonBall.setPosition(this.barrelEnd.getPosition())):this.cannonBall.active=!0,this.cannonBall.getComponent(cc.RigidBody).applyForceToCenter(t,!0),this.getComponent(cc.RigidBody).applyForceToCenter(t.negate(),!0),this.charged=!1,r.default.instance.camera.shakeCamera()}},c([p(cc.Node)],e.prototype,"cannonBall",void 0),c([p(cc.Prefab)],e.prototype,"shotEffect",void 0),c([p(cc.Node)],e.prototype,"barrelEnd",void 0),c([l],e)}(s.default);o.default=d,cc._RF.pop()},{"../Game":"Game","./Obstacle":"Obstacle"}],ChooseLevel:[function(t,e,o){"use strict";cc._RF.push(e,"9f31a7u+ipL5o51u/T4r8EQ","ChooseLevel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Global/UserData"),s=t("../Level/LevelEditor"),a=cc._decorator,l=a.ccclass,p=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pages=[],e.indicator=null,e.menuTheme=null,e.lock=null,e}return i(e,t),e.prototype.onLoad=function(){cc.audioEngine.isMusicPlaying()||cc.audioEngine.playMusic(this.menuTheme,!0),cc.director.preloadScene("Level"),s.default.editMode},e.prototype.openMenu=function(){cc.director.loadScene("Menu")},e.prototype.start=function(){r.default.loaded.stars},e.prototype.loadLevel=function(t,e){+e>r.default.loaded.stars.length?cc.audioEngine.playEffect(this.lock,!1):(s.default.activeLevel=+e,cc.director.loadScene("Level"),cc.audioEngine.stopMusic())},c([p([cc.Node])],e.prototype,"pages",void 0),c([p(cc.Node)],e.prototype,"indicator",void 0),c([p(cc.AudioClip)],e.prototype,"menuTheme",void 0),c([p(cc.AudioClip)],e.prototype,"lock",void 0),c([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Global/UserData":"UserData","../Level/LevelEditor":"LevelEditor"}],CodeMenu:[function(t,e,o){"use strict";cc._RF.push(e,"48347WGBn1NV4JWWmnG86mG","CodeMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Global/Utils"),a=t("../Level/Level"),l=cc._decorator,p=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.code="",e.email=null,e.codeLabel=null,e.shareLabel=null,e}return i(e,t),e.prototype.open=function(){this.email.string="blastthemonster@gmail.com",this.shareLabel.string="Click to copy",this.codeLabel.string=r.default.instance.levelEditor.level.getCode(),this.unscheduleAllCallbacks(),this.node.active=!0,this.tween&&this.tween.stop(),this.tween=cc.tween(this.node).set({opacity:0}).to(.2,{opacity:200}).start()},e.prototype.close=function(){var t=this;this.tween&&this.tween.stop(),cc.tween(this.node).to(.2,{opacity:0}).start(),this.scheduleOnce(function(){t.node.active=!1},.2)},e.prototype.beginEditing=function(t){t.textLabel.string=""},e.prototype.textChanged=function(t){this.code=t},e.prototype.editingEnded=function(t){if(a.default.verifyCode(this.code)){var e=r.default.instance.levelEditor;e.closeEditing(),e.loadLevel(this.code),t.textLabel.string="level loaded"}else this.code="",t.textLabel.string="wrong code"},e.prototype.openReddit=function(){cc.sys.openURL("https://www.reddit.com/r/blastthemonster/")},e.prototype.openGmail=function(){var t=this;cc.sys.os===cc.sys.OS_ANDROID&&jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","copyToClipboard","(Ljava/lang/String)V","blastthemonster@gmail.com"),cc.sys.isBrowser&&s.default.browserCopyTextToClipboard("blastthemonster@gmail.com"),this.email.string="copied to clipboard",this.scheduleOnce(function(){t.email.string="blastthemonster@gmail.com"},1)},e.prototype.copyCode=function(){var t=this;r.default.instance.levelEditor.shareLevel(),this.shareLabel.string="Code copied",this.scheduleOnce(function(){t.shareLabel.string="Click to copy"},1)},c([d(cc.Label)],e.prototype,"email",void 0),c([d(cc.Label)],e.prototype,"codeLabel",void 0),c([d(cc.Label)],e.prototype,"shareLabel",void 0),c([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Game":"Game","../Global/Utils":"Utils","../Level/Level":"Level"}],CollisionContactListener:[function(t,e,o){"use strict";cc._RF.push(e,"8b83baB2/xByawpbBo6Qv2p","CollisionContactListener");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.collisionCallback=null,e.relativeVelocity=500,e}return i(e,t),e.prototype.onBeginContact=function(t,e,o){o.sensor||e.body.linearVelocity.sub(o.body.linearVelocity).mag()>this.relativeVelocity&&this.collisionCallback.emit([])},c([a(cc.Component.EventHandler)],e.prototype,"collisionCallback",void 0),c([a],e.prototype,"relativeVelocity",void 0),c([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],EditorMenu:[function(t,e,o){"use strict";cc._RF.push(e,"d9064NAznxDuJqx2Ci10akP","EditorMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.toolboxContent=null,e.selected=null,e.normal=null,e.anim=null,e.selectedIndex=0,e}return i(e,t),e.prototype.onLoad=function(){var t=this;this.toolboxContent.children.forEach(function(e){var o=new cc.Component.EventHandler;o.target=t.node,o.component="EditorMenu",o.handler="select",o.customEventData=e.getSiblingIndex().toString();var n=e.addComponent(cc.Button);n.clickEvents.push(o),n.transition=cc.Button.Transition.SCALE,n.zoomScale=.9})},e.prototype.open=function(){r.default.instance.gameMenu.close(),this.node.active=!0,this.anim.playAdditive("openEditor").wrapMode=cc.WrapMode.Normal},e.prototype.close=function(){r.default.instance.gameMenu.open(),this.anim.playAdditive("openEditor").wrapMode=cc.WrapMode.Reverse},e.prototype.select=function(t,e){this.toolboxContent.children[this.selectedIndex].getComponent(cc.Sprite).spriteFrame=this.normal,this.toolboxContent.children[e].getComponent(cc.Sprite).spriteFrame=this.selected,this.selectedIndex=e,r.default.instance.levelEditor.selectTool(e)},c([l(cc.Node)],e.prototype,"toolboxContent",void 0),c([l(cc.SpriteFrame)],e.prototype,"selected",void 0),c([l(cc.SpriteFrame)],e.prototype,"normal",void 0),c([l(cc.Animation)],e.prototype,"anim",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Game":"Game"}],Explosion:[function(t,e,o){"use strict";cc._RF.push(e,"ab50e2GyUhC1ICXrzQQA5z7","Explosion");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Game"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.explosionSound=null,e.applyForce=!1,e.interactObstacles=!1,e.maxForce=25e4,e.explosionMark=null,e}return i(e,t),e.prototype.onEnable=function(){var t=this;cc.audioEngine.playEffect(this.explosionSound,!1),this.scheduleOnce(function(){return t.getComponent(cc.Collider).enabled=!1},.05),this.scheduleOnce(function(){return t.node.destroy()},1)},e.prototype.onBeginContact=function(t,e,o){this.enabled=!1,e.enabled=!1;var n=this.getComponent(cc.PhysicsCircleCollider).radius,i=o.node.parent.convertToWorldSpaceAR(o.node.getPosition()),c=e.node.parent.convertToWorldSpaceAR(e.node.getPosition());if(this.applyForce&&o.body.type===cc.RigidBodyType.Dynamic){var r=i.sub(c),s=r.mag(),a=cc.misc.lerp(this.maxForce,this.maxForce/4,s/n);r=r.normalize().mul(a),o.body.applyForceToCenter(r,!0)}if(!o.sensor&&o.node.group.includes("obstacles")&&o instanceof cc.PhysicsBoxCollider){var l=o.node.getChildByName("explosionMask");null===l&&((l=new cc.Node("explosionMask")).setParent(o.node),l.setPosition(o.offset),l.setContentSize(o.size),l.addComponent(cc.Mask).type=cc.Mask.Type.RECT);var p=new cc.Node("explosionMark");p.setContentSize(cc.size(n)),p.setParent(l),p.setPosition(l.convertToNodeSpaceAR(this.node.convertToWorldSpaceAR(cc.Vec3.ZERO))),p.addComponent(cc.Sprite).spriteFrame=this.explosionMark}},e.prototype.onDisable=function(){if(this.interactObstacles)for(var t=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),e=this.getComponent(cc.PhysicsCircleCollider).radius,o=r.default.instance.levelEditor.obstacles,n=4;n<o.length;n++){var i=o[n],c=i.node.parent.convertToWorldSpaceAR(i.node.getPosition());cc.Vec2.distance(t,c)<e&&i.onExplosionDamage(t,e)}},c([l(cc.AudioClip)],e.prototype,"explosionSound",void 0),c([l()],e.prototype,"applyForce",void 0),c([l()],e.prototype,"interactObstacles",void 0),c([l({visible:function(){return this.applyForce}})],e.prototype,"maxForce",void 0),c([l(cc.SpriteFrame)],e.prototype,"explosionMark",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Game":"Game"}],FullScreenButton:[function(t,e,o){"use strict";cc._RF.push(e,"d265cDUHBNOWZDegUO1x9sm","FullScreenButton");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enter=null,e.exit=null,e.target=null,e}return i(e,t),e.prototype.start=function(){cc.sys.isBrowser?cc.screen.fullScreen()?this.target.spriteFrame=this.exit:this.target.spriteFrame=this.enter:this.node.active=!1},e.prototype.toggleFullScreen=function(){cc.screen.fullScreen()?(cc.screen.exitFullScreen(),this.target.getComponent(cc.Sprite).spriteFrame=this.enter):(cc.screen.requestFullScreen(),this.target.getComponent(cc.Sprite).spriteFrame=this.exit)},c([a(cc.SpriteFrame)],e.prototype,"enter",void 0),c([a(cc.SpriteFrame)],e.prototype,"exit",void 0),c([a(cc.Sprite)],e.prototype,"target",void 0),c([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],GameMenu:[function(t,e,o){"use strict";cc._RF.push(e,"2bb5cGD9whGVoXdKGpwgj3b","GameMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Level/LevelEditor"),s=cc._decorator,a=s.ccclass,l=s.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.screen=null,e.buttons=[],e.closeLevel=null,e}return i(e,t),e.prototype.start=function(){r.default.editMode||(this.buttons[2].node.active=!1)},e.prototype.open=function(){this.screen.active=!0,cc.tween(this.node).to(.1,{opacity:255}).start(),this.buttons.forEach(function(t){t.interactable=!0})},e.prototype.close=function(){this.screen.active=!1,this.buttons.forEach(function(t){t.interactable=!1}),cc.tween(this.node).to(.1,{opacity:0}).start()},e.prototype.showCloseLevel=function(t){void 0===t&&(t=!0),this.closeLevel.active=!!t},c([l(cc.Node)],e.prototype,"screen",void 0),c([l([cc.Button])],e.prototype,"buttons",void 0),c([l(cc.Node)],e.prototype,"closeLevel",void 0),c([a],e)}(cc.Component);o.default=p,cc._RF.pop()},{"../Level/LevelEditor":"LevelEditor"}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"64e96uqVJBKRJUx5Ip8lruu","Game");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Grenade"),s=t("./CameraController"),a=t("./ThrowZone"),l=t("./Level/LevelEditor"),p=t("./Obstacles/Monster"),d=t("./Ground"),u=t("./UI/Scoreboard"),h=t("./Global/UserData"),f=t("./UI/GameMenu"),v=t("./OverviewTarget"),y=cc._decorator,g=y.ccclass,m=y.property,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overviewTargets=[],e.gameMenu=null,e.monsterCamera=null,e.levelEditor=null,e.ground=null,e.canvas=null,e.gameTheme=null,e.grenade=null,e.camera=null,e.monster=null,e.throwZone=null,e.center=null,e.scoreboard=null,e.starsCollected=0,e.paused=!1,e.gameover=!1,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){cc.audioEngine.isMusicPlaying()||cc.audioEngine.playMusic(this.gameTheme,!0),cc.director.getPhysicsManager().enabled=!0,cc.debug.setDisplayStats(!1),o.instance=this},e.prototype.look=function(){this.camera.target=this.monster.node,this.camera.overview=!1,Math.random()<.25&&this.monster.getComponent(p.default).playAnimation("Roar")},e.prototype.cancelLook=function(){this.camera.target=this.center,this.camera.overview=!0},e.prototype.chooseLevel=function(){cc.director.loadScene("ChooseLevel"),cc.audioEngine.stopMusic(),l.default.editMode&&h.default.loaded.saveUserLevel(l.default.activeLevel,this.levelEditor.level.getCode())},e.prototype.onThrow=function(){this.overviewTargets.forEach(function(t){t.followTarget=!0})},e.prototype.onBombExploded=function(){this.overviewTargets[1].target=this.monster.node},e.prototype.restart=function(){this.overviewTargets.forEach(function(t){t.reset()}),this.unscheduleAllCallbacks(),this.levelEditor.reloadLevel(),this.monsterCamera.node.active=!1,this.scoreboard.close(),this.grenade.reset(),this.throwZone.node.active=!0,this.starsCollected=0,this.camera.overview=!0,this.camera.target=o.instance.center,this.overviewTargets[1].target=this.grenade.node,this.gameover=!1,this.gameMenu.showCloseLevel(!1)},e.prototype.endGame=function(){this.gameover||(this.gameover=!0,this.monsterCamera.node.active=!0,l.default.editMode?(h.default.loaded.saveUserLevel(l.default.activeLevel,this.levelEditor.level.getCode()),h.default.loaded.setUserStars(l.default.activeLevel,this.starsCollected)):h.default.loaded.setStars(l.default.activeLevel,this.starsCollected),this.scoreboard.open())},e.prototype.pause=function(){cc.director.getPhysicsManager().enabled=!1,this.grenade.onPauseGame(),this.paused=!0},e.prototype.resume=function(){this.grenade.onResumeGame(),cc.director.getPhysicsManager().enabled=!0,this.paused=!1},c([m([v.default])],e.prototype,"overviewTargets",void 0),c([m(f.default)],e.prototype,"gameMenu",void 0),c([m(cc.Camera)],e.prototype,"monsterCamera",void 0),c([m(l.default)],e.prototype,"levelEditor",void 0),c([m(d.default)],e.prototype,"ground",void 0),c([m(cc.Animation)],e.prototype,"canvas",void 0),c([m(cc.AudioClip)],e.prototype,"gameTheme",void 0),c([m(r.default)],e.prototype,"grenade",void 0),c([m(s.default)],e.prototype,"camera",void 0),c([m(p.default)],e.prototype,"monster",void 0),c([m(a.default)],e.prototype,"throwZone",void 0),c([m(cc.Node)],e.prototype,"center",void 0),c([m(u.default)],e.prototype,"scoreboard",void 0),o=c([g],e)}(cc.Component);o.default=b,cc._RF.pop()},{"./CameraController":"CameraController","./Global/UserData":"UserData","./Grenade":"Grenade","./Ground":"Ground","./Level/LevelEditor":"LevelEditor","./Obstacles/Monster":"Monster","./OverviewTarget":"OverviewTarget","./ThrowZone":"ThrowZone","./UI/GameMenu":"GameMenu","./UI/Scoreboard":"Scoreboard"}],Grenade:[function(t,e,o){"use strict";cc._RF.push(e,"b6677kXOsxNAIymDJOJI4m4","Grenade");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=t("./Game"),p=t("./Obstacles/Monster"),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.igniteBurningSound=null,e.extinguishSound=null,e.throwSound=null,e.timer=3,e.explosion=null,e.spark=null,e.wick=null,e.controlPoint=null,e.ignited=!1,e.igniteBurningSoundAudioId=0,e.preElapsedTime=0,e.elapsedTime=0,e}return i(e,t),e.prototype.start=function(){this.startPosition=this.node.getPosition()},e.prototype.throw=function(t){var e=this.getComponent(cc.RigidBody);e.type=cc.RigidBodyType.Dynamic,e.applyForceToCenter(cc.v2(t.x,t.y),!0),cc.audioEngine.playEffect(this.throwSound,!1)},e.prototype.update=function(t){if(this.ignited&&!l.default.instance.paused){this.elapsedTime+=t;var e=cc.Vec3.ZERO,o=cc.Vec3.ZERO;this.spark.position=cc.Vec3.lerp(e,cc.v3(20,0,0),cc.Vec3.ZERO,this.elapsedTime/this.timer),this.controlPoint.position=cc.Vec3.lerp(o,cc.v3(10,0,0),cc.Vec3.ZERO,this.elapsedTime/this.timer);var n=this.timer-.7;this.elapsedTime>n&&this.preElapsedTime<n&&this.preExplode(),n=this.timer,this.elapsedTime>n&&this.preElapsedTime<n&&this.explode(),n=this.timer+2,this.elapsedTime>n&&n<this.timer&&l.default.instance.endGame()}this.preElapsedTime=this.elapsedTime;var i=this.wick,c=this.spark.position;i.clear(),i.moveTo(0,0);var r=this.controlPoint.position;r=this.wick.node.convertToNodeSpaceAR(this.controlPoint.convertToWorldSpaceAR(cc.Vec3.ZERO,r)),i.quadraticCurveTo(r.x,r.y,c.x,c.y),i.stroke()},e.prototype.preExplode=function(){var t=l.default.instance.monster.node,e=t.parent.convertToWorldSpaceAR(t.getPosition());this.node.getPosition().sub(e).mag()<200&&t.getComponent(p.default).playAnimation("Scream")},e.prototype.prepare=function(){this.node.children.forEach(function(t){t.active=!0})},e.prototype.ignite=function(){this.spark.active=!0,this.ignited=!0,this.igniteBurningSoundAudioId=cc.audioEngine.playEffect(this.igniteBurningSound,!1)},e.prototype.extinguish=function(){this.ignited&&cc.audioEngine.playEffect(this.extinguishSound,!1),this.ignited=!1,this.elapsedTime=0,this.spark.active=!1,this.spark.setPosition(cc.v2(20,0)),this.controlPoint.setPosition(cc.v2(10,0)),this.node.children.forEach(function(t){t.active=!1}),cc.audioEngine.getState(this.igniteBurningSoundAudioId)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.stopEffect(this.igniteBurningSoundAudioId)},e.prototype.reset=function(){this.extinguish(),this.node.setPosition(this.startPosition);var t=this.getComponent(cc.RigidBody);t.type=cc.RigidBodyType.Static,t.linearVelocity=cc.Vec2.ZERO,this.node.active=!0,this.node.angle=0},e.prototype.explode=function(){this.node.active=!1;var t=l.default.instance.monster,e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());t.onBombExploded(e),l.default.instance.onBombExploded(),l.default.instance.camera.shakeCamera();var o=cc.instantiate(this.explosion);o.setParent(cc.director.getScene()),o.setPosition(this.node.getPosition())},e.prototype.onPauseGame=function(){cc.audioEngine.getState(this.igniteBurningSoundAudioId)==cc.audioEngine.AudioState.PLAYING&&cc.audioEngine.pauseEffect(this.igniteBurningSoundAudioId)},e.prototype.onResumeGame=function(){cc.audioEngine.getState(this.igniteBurningSoundAudioId)==cc.audioEngine.AudioState.PAUSED&&cc.audioEngine.resumeEffect(this.igniteBurningSoundAudioId)},c([a(cc.AudioClip)],e.prototype,"igniteBurningSound",void 0),c([a(cc.AudioClip)],e.prototype,"extinguishSound",void 0),c([a(cc.AudioClip)],e.prototype,"throwSound",void 0),c([a],e.prototype,"timer",void 0),c([a(cc.Prefab)],e.prototype,"explosion",void 0),c([a(cc.Node)],e.prototype,"spark",void 0),c([a(cc.Graphics)],e.prototype,"wick",void 0),c([a(cc.Node)],e.prototype,"controlPoint",void 0),c([s],e)}(cc.Component);o.default=d,cc._RF.pop()},{"./Game":"Game","./Obstacles/Monster":"Monster"}],Ground:[function(t,e,o){"use strict";cc._RF.push(e,"492b2qkq41CLZpQAGgwiIqQ","Ground");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.segments=[],e.camera=null,e.segmentLength=1600,e}return i(e,t),e.prototype.update=function(){var t=this.segments,e=this.camera.parent.convertToWorldSpaceAR(this.camera.position),o=t[1].parent.convertToWorldSpaceAR(t[1].position);e.x>o.x+this.segmentLength?(t[0].position=t[2].position.add(cc.v3(this.segmentLength)),t.push(t.shift())):e.x<o.x&&(t[2].position=t[0].position.sub(cc.v3(this.segmentLength)),t.unshift(t.pop()))},e.prototype.intersectPoint=function(t){var e=this.getComponent(cc.PolygonCollider).world.points;return!!cc.Intersection.pointInPolygon(t,e)},c([a([cc.Node])],e.prototype,"segments",void 0),c([a(cc.Node)],e.prototype,"camera",void 0),c([a],e.prototype,"segmentLength",void 0),c([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],LevelEditor:[function(t,e,o){"use strict";cc._RF.push(e,"2f98aeHDfhJ8J9FlKPTWqoZ","LevelEditor");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Obstacles/Obstacle"),a=t("./TrashBin"),l=t("./Level"),p=t("../UI/EditorMenu"),d=t("../Global/UserData"),u=t("../Global/Utils"),h=cc._decorator,f=h.ccclass,v=h.property,y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.overviewTarget=null,e.dragTreshold=10,e.editorMenu=null,e.trashBin=null,e.selector=null,e.openSound=null,e.pin=null,e.closeSound=null,e.cellSize=32,e.pointRadius=5,e.obstaclePrefabs=[],e.editorPanel=null,e.cameraTarget=null,e.minMaxZoom=cc.v2(.4,1.4),e.level=l.default.getLevel(0),e.selectedObstacle=0,e.selectedPoints=[],e.camera=null,e.editing=!1,e.touchStart=cc.Vec2.ZERO,e.drag=!1,e.distance=0,e.obstacles=new Array,e}var o;return i(e,t),o=e,e.prototype.onLoad=function(){this.editorPanel.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.editorPanel.on(cc.Node.EventType.TOUCH_MOVE,this.onTouchMove,this),this.editorPanel.on(cc.Node.EventType.TOUCH_END,this.onTouchEnd,this),this.editorPanel.on(cc.Node.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.editorPanel.on(cc.Node.EventType.MOUSE_WHEEL,this.mouseWheel,this)},e.prototype.start=function(){if(this.camera=cc.Camera.main,o.editMode){var t=d.default.loaded.getUserLevel(o.activeLevel);this.level=null!=t?l.default.fromCode(t):l.default.getLevel(0),this.reloadLevel(),this.openEditing()}else this.level=l.default.getLevel(o.activeLevel),this.reloadLevel()},e.prototype.openEditing=function(){r.default.instance.grenade.ignited?r.default.instance.restart():this.reloadLevel(),cc.audioEngine.playEffect(this.openSound,!1),this.editorMenu.open(),this.editing=!0,this.editorPanel.active=!0;var t=r.default.instance.camera,e=this.obstacles[0].node.getPosition();this.cameraTarget.setPosition(e),t.target=this.cameraTarget,t.overview=!1,cc.director.getPhysicsManager().enabled=!1},e.prototype.selectTool=function(t){this.selectedObstacle=+t,t<this.obstaclePrefabs.length&&cc.audioEngine.playEffect(this.obstaclePrefabs[t].data.getComponent(s.default).dragSounds[0],!1)},e.prototype.closeEditing=function(){this.editing=!1;var t=r.default.instance.camera;t.target=r.default.instance.center,t.overview=!0,this.saveLevel(),this.reloadLevel(),cc.director.getPhysicsManager().enabled=!0,cc.audioEngine.playEffect(this.closeSound,!1),this.editorMenu.close(),this.editorPanel.active=!1},e.prototype.onTouchStart=function(t){this.touchStart=t.touch.getLocation()},e.prototype.onTouchCancel=function(){this.clearPoints()},e.prototype.onTouchEnd=function(t){if(this.editing)if(this.drag)this.drag=!1;else{this.selectPoint(t.touch.getLocation());var e=t.touch.getLocation(),o=this.convertToLocalPoint(e),n=Math.round(o.x/this.cellSize),i=Math.round(o.y/this.cellSize);if(this.selectedPoints.push(cc.v2(n,i)),2==this.selectedObstacle&&this.selectedPoints.push(this.selectedPoints[0]),this.selectedPoints.length>1){if((0==this.selectedObstacle||3==this.selectedObstacle)&&this.selectedPoints[0].equals(this.selectedPoints[1]))return void this.clearPoints();this.createObstacle()}}},e.prototype.selectPoint=function(t){this.selector.setPosition(this.snapToGridInNodeSpace(t)),this.selector.active=!0},e.prototype.onTouchMove=function(t){var e=t.getTouches();if(e.length>1){0==this.distance&&(this.distance=cc.Vec2.squaredDistance(e[0].getLocation(),e[1].getLocation())/this.camera.zoomRatio);var o=cc.Vec2.squaredDistance(e[0].getLocation(),e[1].getLocation())/this.distance;this.camera.zoomRatio=o,this.camera.zoomRatio=cc.misc.clampf(this.camera.zoomRatio,this.minMaxZoom.x,this.minMaxZoom.y)}else this.distance=0;this.drag||this.touchStart.sub(t.touch.getLocation()).mag()>this.dragTreshold&&(this.clearPoints(),this.drag=!0);var n=t.touch.getDelta();this.moveCamera(n)},e.prototype.moveCamera=function(t){var e=this.cameraTarget.getPosition(),o=this.camera.zoomRatio;(e=e.sub(t.mul(1.5/o))).x=cc.misc.clampf(e.x,0,this.node.width),e.y=cc.misc.clampf(e.y,0,this.node.height),this.cameraTarget.setPosition(e)},e.prototype.saveLevel=function(){var t=new Array;this.obstacles.forEach(function(e){t.push(e.getInfo())}),this.level=new l.default(t)},e.prototype.clearPoints=function(){this.selectedPoints=[],this.selector.active=!1},e.prototype.mouseWheel=function(t){var e=t.getScrollY();e=cc.misc.clampf(e,-1,1),this.camera.zoomRatio+=.1*e,this.camera.zoomRatio=cc.misc.clampf(this.camera.zoomRatio,this.minMaxZoom.x,this.minMaxZoom.y)},e.prototype.loadLevel=function(t){this.level=l.default.fromCode(t),this.reloadLevel()},e.prototype.reloadLevel=function(){this.clearPoints(),this.clearLevel();for(var t=this.selectedObstacle,e=0;e<this.level.obstacles.length;e++){var o=this.level.obstacles[e];e<4?this.obstacles[e].setPosition(o.point1.mul(this.cellSize)):(this.selectedObstacle=o.id-2,this.selectedPoints.push(o.point1),this.selectedPoints.push(o.point2),this.selectedObstacle<this.obstaclePrefabs.length&&this.createObstacle())}var n=0,i=0;for(e=0;e<this.obstacles.length;e++){(o=this.obstacles[e]).reset();var c=o.node.getBoundingBoxToWorld(),s=c.xMax,a=c.yMax;n=s>n?s:n,i=a>i?a:i}var l=r.default.instance.overviewTargets[0];l.followTarget||l.setPosition(cc.v2(n-150,i-150)),this.selectedObstacle=t},e.prototype.clearLevel=function(){for(var t=4;t<this.obstacles.length;t++)this.obstacles[t].destroy();for(this.obstacles.splice(4,this.obstacles.length),t=8;t<this.node.children.length;t++)this.node.children[t].destroy()},e.prototype.createObstacle=function(){var t=this.selectedPoints;this.selectedObstacle<2&&t.sort(function(t,e){return Math.abs(t.x-e.x)>Math.abs(t.y-e.y)?t.x-e.x:t.y-e.y});var e=cc.instantiate(this.obstaclePrefabs[this.selectedObstacle]);this.obstacles.push(e.getComponent(s.default));var o=t[0].mul(this.cellSize),n=t[1].mul(this.cellSize);e.setParent(this.node),e.getComponent(s.default).onCreate(o,n),this.clearPoints()},e.prototype.snapToGrid=function(t){return this.node.convertToWorldSpaceAR(this.snapToGridInNodeSpace(t))},e.prototype.snapToGridInNodeSpace=function(t){var e=this.convertToLocalPoint(t),o=Math.round(e.x/this.cellSize)*this.cellSize,n=Math.round(e.y/this.cellSize)*this.cellSize;return cc.v2(o,n)},e.prototype.convertToLocalPoint=function(t){return this.camera.getScreenToWorldPoint(t,t),this.node.convertToNodeSpaceAR(t)},e.prototype.shareLevel=function(){this.saveLevel();var t=this.level.getCode();console.log(t),cc.sys.os===cc.sys.OS_ANDROID?jsb.reflection.callStaticMethod("org/cocos2dx/javascript/AppActivity","copyToClipboard","(Ljava/lang/String;)V",t):cc.sys.os!==cc.sys.OS_IOS&&cc.sys.os!==cc.sys.OS_OSX||jsb.reflection.callStaticMethod("AppController","showAlertDialog:withMessage:","Level Code",t),cc.sys.isBrowser&&u.default.browserCopyTextToClipboard(t)},e.activeLevel=0,e.editMode=!0,c([v(cc.Node)],e.prototype,"overviewTarget",void 0),c([v],e.prototype,"dragTreshold",void 0),c([v(p.default)],e.prototype,"editorMenu",void 0),c([v(a.default)],e.prototype,"trashBin",void 0),c([v(cc.Node)],e.prototype,"selector",void 0),c([v(cc.AudioClip)],e.prototype,"openSound",void 0),c([v(cc.SpriteFrame)],e.prototype,"pin",void 0),c([v(cc.AudioClip)],e.prototype,"closeSound",void 0),c([v],e.prototype,"cellSize",void 0),c([v],e.prototype,"pointRadius",void 0),c([v([cc.Prefab])],e.prototype,"obstaclePrefabs",void 0),c([v(cc.Node)],e.prototype,"editorPanel",void 0),c([v(cc.Node)],e.prototype,"cameraTarget",void 0),c([v(cc.Vec2)],e.prototype,"minMaxZoom",void 0),c([v([s.default])],e.prototype,"obstacles",void 0),o=c([f],e)}(cc.Component);o.default=y,cc._RF.pop()},{"../Game":"Game","../Global/UserData":"UserData","../Global/Utils":"Utils","../Obstacles/Obstacle":"Obstacle","../UI/EditorMenu":"EditorMenu","./Level":"Level","./TrashBin":"TrashBin"}],LevelFrame:[function(t,e,o){"use strict";cc._RF.push(e,"f2a93FPZhlIQYV6qg+9KdPm","LevelFrame");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Global/UserData"),s=t("../Level/LevelEditor"),a=cc._decorator,l=a.ccclass,p=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lockSound=null,e.blueSkin=null,e.label=null,e.lock=null,e.frame=null,e.stars=null,e.plus=null,e.index=0,e.locked=!0,e.addLvel=!1,e}return i(e,t),e.prototype.start=function(){this.index=this.node.getSiblingIndex()+15*this.node.parent.getSiblingIndex(),this.label.string=(this.index+1).toString();var t=r.default.loaded;if(s.default.editMode)if(this.frame.spriteFrame=this.blueSkin,this.lock.active=!1,null!=t.userLevels[this.index]){if(this.label.node.active=!0,null==t.userStars)return;for(this.stars.active=!0,o=0;o<3;o++){n=this.stars.children[o];var e=t.userStars[this.index];n.active=null!=e&&o<e}}else this.plus.active=!0,this.frame.enabled=!1;else if(this.index<=t.stars.length){this.lock.active=!1,this.label.node.active=!0,this.stars.active=!0;for(var o=0;o<3;o++){var n;(n=this.stars.children[o]).active=o<t.stars[this.index]}}},e.prototype.press=function(){!s.default.editMode&&this.index>r.default.loaded.stars.length?cc.audioEngine.playEffect(this.lockSound,!1):(s.default.activeLevel=this.index,cc.director.loadScene("Level"),cc.audioEngine.stopMusic())},c([p(cc.AudioClip)],e.prototype,"lockSound",void 0),c([p(cc.SpriteFrame)],e.prototype,"blueSkin",void 0),c([p(cc.Label)],e.prototype,"label",void 0),c([p(cc.Node)],e.prototype,"lock",void 0),c([p(cc.Sprite)],e.prototype,"frame",void 0),c([p(cc.Node)],e.prototype,"stars",void 0),c([p(cc.Node)],e.prototype,"plus",void 0),c([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Global/UserData":"UserData","../Level/LevelEditor":"LevelEditor"}],Level:[function(t,e,o){"use strict";cc._RF.push(e,"a1edduVqH9CqaqfK+pxurIm","Level"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../Obstacles/ObstacleInfo"),i=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9",":","-","?"],c=function(){function t(t){this.obstacles=[],this.obstacles=t}return t.prototype.addObstacle=function(t){this.obstacles.push(t)},t.prototype.getCode=function(){for(var t="",e=this.toArray(),o=0;o<e.length;o++){var n=i[e[o]];t=t.concat(n)}return t},t.fromCode=function(t){for(var e=new Array,o=0;o<t.length;o++){var n=i.indexOf(t[o]);e.push(n)}return this.fromArray(e)},t.prototype.toArray=function(){for(var t=new Array,e=0;e<this.obstacles.length;e++){var o=this.obstacles[e];t=t.concat(o.getNumbers())}return t},t.fromArray=function(e){var o=new Array,i=cc.v2(e[0],e[1]);o.push(new n.default(0,i));for(var c=2;c<8;c+=2){var r=cc.v2(e[c],e[c+1]);o.push(new n.default(1,r))}for(var s=8;s<e.length;){var a=e[s],l=cc.v2(e[s+1],e[s+2]),p=cc.v2(l.x,l.y);n.default.hasControlpoint(a)?(p=cc.v2(e[s+3],e[s+4]),s+=5):s+=3,o.push(new n.default(a,l,p))}return new t(o)},t.getLevel=function(t){var e="ijmnipenckckhdhhkh";switch(t>0&&cc.sys.localStorage.getItem("levelSeed"),t){case 1:e="jlpqiecrcmhshcfbfgclblgdfhlhdgjmjegiemicsbss";break;case 2:e="tlxlqfpmcsbsjdsjvjdvjzgdzgzpdnpzpdnknpdjgnedneqicdbdgddgjg";break;case 3:e="CmvgxopgcmamjcyayjdmkskdtkykcsbsjcsjtjcEaEkdBkEk";break;case 4:e="xdHetkAscqbqgcqgvgcFbFgcJbJsdqhqmdpnrndqoqscvgvhcvhAh";break;case 5:e="rlokkjgjdujvpcpsvpdnopscuaujdqjujdibijcmbmkdghjhcfaegdcfeg";break;case 6:e="yfyoyzfrdCjCodBaCjdvjvodvoxscCoBqcwbvjdvdCd";break;case 7:e="EkFfuizqcHaHncAsHndDiHidvasgdsgxecxeCedBfBodAfAmdzfzkdyfyj";break;case 8:e="vnigwjpmdyayqdmnsqcsqyqdvlyldmgmqcmcybjnipidrdrgfmgrg";break;case 9:e="nlumaoCccqkqoclklocloqocoaojdljqj";break;case 10:e="yA8gUotGctbtxcDv-adqvDvdCwCzeCwdDAFAdDABDdvyFydFyFAdvDCDdvwvDevw";break;case 11:e="GpvvHyStdMoMvdBwMwdMwHCdBwHCdBoBvdDyDBdDBFBeJpeEpeDpeKpeJqcNaNpcAaApcAnNndFAJAdFxFBeEqdJwJA";break;case 12:e="vkqfrrgfdwawiewidpiDidBiBj";break;case 13:e="tkxmudqmdpbpidzbzifpizi";break;case 14:e="wnpnvzyrdCaCrdmkCldmkmpdsntrdqrtrdsjsndCrxAcrsrzfmppk";break;case 15:e="yDlwgtrxcwBwGcwGBGdBDCDdZcZDdKD0DcBBBGdwBBBfCDKD";break;case 16:e="BrysGsrsdJaIudguIudgogufgoIo";break;case 17:e="uovjxf8ddtiwidwjwmcvdGadtitmcvdvi";break;case 18:e="zjspxsApdqaqkdugqkdzgCgfugzgdrjujcukupcxnCndCdCsdCdIb";break;case 19:e="qhqdmhrlckckhdghkhdhntnehnchihndtatndpftf";break;case 20:e="udCnunyecsbsgdEaEqcsgAgdtqEqeAgdAgAn";break;case 21:e="jkskwrgldyayidsiyicDaDfdAfDfduhupcfhuhcfnoncfcfncrnvncuquwdupwpdiimifkius";break;case 22:e="irqojjcsckckhdhhkhdkgpgdmGtDdhhhpdgpjpcgpgucgukudtatDgnznvfnznGhngog";break;case 23:e="CnJovuyodAAOAdAtAufAuAAdFlFpdvlvpfAtFpfvpAtdvlFldGcOcgIAIuhGcIccOaOA";break;case 24:e="nhwcipekckckhdhhkhdkdpdiodqddhhlohjkkl";break;case 25:e="niLF4q-dckckhdkdndindpchkhmi";break;case 26:e="togelqngdohwhdleoedoerheledlelhilhnhcqmwmdjswsdwbwsdjmjs";break;case 27:e="tjmmfqxmdzazrjwczccrarocrhuhdpoAo";break;case 28:e="soqdmotjcvavvcpgpvdpvvvdsfvfjtgugdomrmclalidmcme";break;case 29:e="AdoegqnjdqoAogsoskjrfrccAgFgcFaFgcAgAoiFdFfhAhAjcqbqoeqhcnhthhqkqn";break;case 30:e="ogxsotvddqvAudkeneckckhdndrdcndnedAaAuguruofuquvhAdAfikgkfhrdtdckhsmdzpApjzkzp";break;case 31:e="Peyrtncwd1b1vd1v1GdhG1GciaifdCv1vdBaBvgPvPshBrBudUbUgiUeUgdpaphdnhphhnhnldhihmfhGhl";break;case 32:e="BdrkudmfckckhdkcocdugtndkntniuhukcugEgcEbEgdybEbjkikmhkkki";break;case 33:e="vgwlxxstcyayueyujuuyucsasrfyesedsrur";break;case 34:e="nhquwjikckckhdkdocdEaEuildobdocpeckhomcomumdypEphErEtgzpzm";break;case 35:e="zdqqxomldkdwdirdtdcwawmdkdkhdDaDsdmnpsdpsDs";break;case 36:e="kmhnliamdfifpdkknkdcdnddhehhjgihicnbnpcfpnp";break;case 37:e="lscqhlmddddkdijdkdcoaovdfvovdatfvchshvihsesddadgdlqpqdlnlq";break;case 38:e="sgskpudtcfafscqbpsepsgpsmpdpeuehfpft";break;case 39:e="uorposiockckhdhhkhcxaxscrsxsehhcjmrsctmxmghhhn";break;case 40:e="nfcjrpsgckckhdkdqddchkhdhihnjgoiockholdxaxr";break;case 41:e="ljmnlqenciaindihnhcpbpscdspsdgnincgogrjhpho";break;case 42:e="emmninpodsbsqdbqsqcbkbqcbkgkdfghgfgggk";break;case 43:e="ydsdEijkcGaGrcDlGldCrGrcuaujcujBldrfufgCkCifCrCjhsfufiuduchGoGq";break;case 44:e="peBnpofkckckhcftDpdhinidhiilcfhxheniehiikekbhkimicDaDp";break;case 45:e="rqiupggecrcrodpouoermdvmxpdjmvmcpppxdxpvrdojon";break;case 46:e="DdtojkzddGaGndxaxhdvnGndiinieiidhhxheniclilkexngxnxl";break;case 47:e="vnwrBnEhcvavfdugukdxgxkcofGfdqjqvdqvCwdGfCwcslyl";break;case 48:e="KhKdEihkczazfdhfzfdhfhiihhhfdkgoghmgngeogekgd6aXjdYe6edvkNkevkcvgvkdNaNkdJfNf";break;case 49:e="IeBnLjGocGcGldDmGldAjDmdAjxncGcLccLbLhcKhRh";break;case 50:e="HgRdAeRndyayqdOqTqdTaTqdOpOqjCpCqjGpGqjKqKpfyqCqfCqGqfGqKqfKqOqdHaHeeHedFeJedJbJd"}return this.fromCode(e)},t.verifyCode=function(t){if(t.length<8)return console.log("failed to read code: code is too short"),!1;for(var e=new Array,o=0;o<t.length;o++){var c=i.indexOf(t[o]);if(e.push(c),c<0)return console.log("failed to read code: wrong symbol '"+t[o]+"'"),!1}for(var r=8;r<e.length;){var s=e[r];if(s<2||s>9)return console.log("failed to read code: obstacle ID is out of range ("+s+")"),!1;if(cc.v2(e[r+1],e[r+2]).y>32)return console.log("failed to read code: wrong coordinate"),!1;if(n.default.hasControlpoint(s)){if(cc.v2(e[r+3],e[r+4]).y>32)return console.log("failed to read code: wrong position"),!1;r+=5}else r+=3}return!0},t}();o.default=c,cc._RF.pop()},{"../Obstacles/ObstacleInfo":"ObstacleInfo"}],Menu:[function(t,e,o){"use strict";cc._RF.push(e,"fdb9e3NZ8hKZoOo/nqLK1dU","Menu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=t("./Level/LevelEditor"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.menuTheme=null,e}return i(e,t),e.prototype.onLoad=function(){var t=cc.sys.localStorage.getItem("soundVolume"),e=cc.sys.localStorage.getItem("musicVolume");cc.audioEngine.setEffectsVolume(null!=t?t:1),cc.audioEngine.setMusicVolume(null!=e?e:1),cc.audioEngine.isMusicPlaying()||cc.audioEngine.playMusic(this.menuTheme,!0),cc.director.preloadScene("ChooseLevel")},e.prototype.chooseLevel=function(){l.default.editMode=!1,cc.director.loadScene("ChooseLevel")},e.prototype.editLevel=function(){l.default.editMode=!0,cc.director.loadScene("ChooseLevel")},e.prototype.openMenu=function(){cc.director.loadScene("Menu")},c([a(cc.AudioClip)],e.prototype,"menuTheme",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Level/LevelEditor":"LevelEditor"}],Monster:[function(t,e,o){"use strict";cc._RF.push(e,"5a717pe3xpPjodhHYBat/A2","Monster");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("./Obstacle"),a=cc._decorator,l=a.ccclass,p=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dead=null,e.hurtSounds=[],e.roarSounds=[],e.screamSounds=[],e.laughs=[],e.explosion=null,e.animation=null,e.bloodMask=null,e.blood=null,e.body=null,e.guts=[],e.isDead=!1,e.isFliying=!1,e.audio=null,e.bombExploded=!1,e.endgameTimer=0,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.audio=this.getComponent(cc.AudioSource),this.audio.volume=cc.audioEngine.getEffectsVolume()},e.prototype.update=function(t){this.bombExploded&&!r.default.instance.paused&&(this.endgameTimer+=t,this.endgameTimer>1&&(this.getComponent(cc.RigidBody).linearVelocity.mag()<1&&this.endgameTimer>2&&r.default.instance.endGame(),this.endgameTimer>5&&r.default.instance.gameMenu.showCloseLevel()))},e.prototype.reset=function(){t.prototype.reset.call(this),this.animation.play(),this.bloodMask.node.setContentSize(128,128),this.guts.forEach(function(t){t.active=!1}),this.node.angle=0,this.isDead&&(this.isDead=!1,this.bloodMask.enabled=!1,this.blood.active=!1);var e=this.getComponent(cc.RigidBody);e.awake=!0,e.linearVelocity=cc.Vec2.ZERO,e.angularVelocity=0,this.bombExploded=!1,this.endgameTimer=0},e.prototype.onBeginContact=function(t,e,o){if(!o.sensor){var n=e.body.linearVelocity.sub(o.body.linearVelocity).mag();n>500&&this.playAnimation("Hurt"),"cannonBall"===o.node.name&&n>3e3&&this.onBombExploded(o.node.parent.convertToWorldSpaceAR(o.node.getPosition())),this.isFliying=!1}},e.prototype.playAnimation=function(t){if(!this.isDead){var e=this.animation;if("Hurt"!=t||!this.audio.isPlaying){this.unscheduleAllCallbacks(),e.stop();var o=this.hurtSounds;switch(t){case"Scream":o=this.screamSounds;break;case"Roar":o=this.roarSounds;break;case"Laugh":o=this.laughs}var n=o[this.getRandomInt(0,o.length)],i=e.play(t);this.audio.clip=n,this.audio.play(),this.scheduleOnce(function(){e.play("Idle")},i.duration)}}},e.prototype.explode=function(t){var e=this.node.convertToWorldSpaceAR(this.node.children[1].getPosition()),o=cc.Vec2.distance(e,t),n=o>100?o-100:20;t.subSelf(t.sub(e).normalize().mul(n)),this.isDead=!0,this.animation.stop(),this.unscheduleAllCallbacks(),this.body.getComponent(cc.Sprite).spriteFrame=this.dead,this.bloodMask.node.setContentSize(200,200),this.bloodMask.node.setPosition(this.node.convertToNodeSpaceAR(t));var i=this.node.convertToWorldSpaceAR(cc.v2(16,16));this.blood.setPosition(this.blood.parent.convertToNodeSpaceAR(i)),this.body.setPosition(this.body.parent.convertToNodeSpaceAR(i)),this.blood.children[0].setPosition(this.blood.convertToNodeSpaceAR(t)),this.bloodMask.enabled=!0,this.blood.active=!0;var c=cc.instantiate(this.explosion);c.parent=cc.director.getScene(),c.position=cc.director.getScene().convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.node.position)),this.guts[0].active=!0;for(var r=1;r<this.guts.length;r++){var s=this.guts[r],a=s.parent.convertToWorldSpaceAR(s.getPosition());cc.Vec2.squaredDistance(t,a)<6400&&(s.active=!0)}},e.prototype.onBombExploded=function(t){if(!this.isDead){this.bombExploded=!0;var e=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),o=t.sub(e).mag(),n=cc.director.getPhysicsManager().rayCast(t,e,cc.RayCastType.AllClosest),i=!1;n.forEach(function(t){i=i||"metal"==t.collider.node.name}),o<200&&!i?this.explode(t):this.playAnimation("Laugh")}},e.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},c([p(cc.SpriteFrame)],e.prototype,"dead",void 0),c([p([cc.AudioClip])],e.prototype,"hurtSounds",void 0),c([p([cc.AudioClip])],e.prototype,"roarSounds",void 0),c([p([cc.AudioClip])],e.prototype,"screamSounds",void 0),c([p([cc.AudioClip])],e.prototype,"laughs",void 0),c([p(cc.Prefab)],e.prototype,"explosion",void 0),c([p(cc.Animation)],e.prototype,"animation",void 0),c([p(cc.Mask)],e.prototype,"bloodMask",void 0),c([p(cc.Node)],e.prototype,"blood",void 0),c([p(cc.Node)],e.prototype,"body",void 0),c([p([cc.Node])],e.prototype,"guts",void 0),c([l],e)}(s.default);o.default=d,cc._RF.pop()},{"../Game":"Game","./Obstacle":"Obstacle"}],ObstacleInfo:[function(t,e,o){"use strict";cc._RF.push(e,"247cdOcpTtOc6HnM0wJxUGn","ObstacleInfo"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t,e,o){this.id=t,this.point1=e,this.point2=null!=o?o:cc.v2(e.x,e.y)}return t.prototype.getNumbers=function(){var e=new Array;return this.id>1&&e.push(this.id),e.push(this.point1.x),e.push(this.point1.y),t.hasControlpoint(this.id)&&(e.push(this.point2.x),e.push(this.point2.y)),e},t.hasControlpoint=function(t){switch(t){case 0:case 1:case 4:return!1;default:return!0}},t}();o.default=n,cc._RF.pop()},{}],Obstacle:[function(t,e,o){"use strict";cc._RF.push(e,"b6d69ZYqlFExa7BlVG/QNNi","Obstacle");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Global/Utils"),a=t("../Level/Pin"),l=t("../Obstacles/ObstacleInfo"),p=cc._decorator,d=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.id=0,e.interactive=!1,e.coloredNode=null,e.fixedLength=-1,e.dragSounds=[],e.dropSounds=[],e.defaultColor=cc.Color.WHITE,e.sortPoints=!0,e.point1=cc.Vec2.ZERO,e.point2=cc.Vec2.ZERO,e.dragOffset=cc.Vec2.ZERO,e.camera=null,e.pins=[],e.target=null,e.canCollide=!0,e}return i(e,t),e.prototype.start=function(){this.camera=cc.Camera.main},e.prototype.onLoad=function(){this.interactive&&(this.defaultColor=this.coloredNode.color),this.node.on(cc.Node.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.move,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onEndDrag,this)},e.prototype.onTouchStart=function(t){this.interactive&&(this.coloredNode.color=this.defaultColor),this.playRandomSound(this.dragSounds),this.removePins();var e=t.getLocation();if(this.camera.getScreenToWorldPoint(e,e),this.dragOffset=this.node.convertToNodeSpaceAR(e).rotate(cc.misc.degreesToRadians(this.node.angle)),this.id>1){this.node.setSiblingIndex(this.node.parent.childrenCount-1);var o=r.default.instance.levelEditor.obstacles;o.push(o.splice(o.indexOf(this),1)[0]),r.default.instance.levelEditor.trashBin.show(this)}this.toLayer("obstacles")},e.prototype.activate=function(){},e.prototype.onPinRemoved=function(){0==this.pins.length&&this.toLayer("obstacles")},e.prototype.removePins=function(){if(null!=this.pins)for(var t=this.pins.length;t--;)this.pins[t].remove()},e.prototype.toLayer=function(t){this.node.group=t;var e=this.node.getComponent(cc.PhysicsCollider);null!=e&&e.apply()},e.prototype.setPosition=function(t){this.point1=t,this.point2=t,this.node.setPosition(t)},e.prototype.remove=function(){var t=r.default.instance.levelEditor.obstacles;t.splice(t.indexOf(this),1),this.node.destroy()},e.prototype.move=function(t){var e=t.getLocation(),o=this.camera.zoomRatio;e=e.sub(this.dragOffset.mul(o)),this.camera.getScreenToWorldPoint(e,e),this.node.setPosition(this.node.parent.convertToNodeSpaceAR(e)),this.id>1&&(e=t.getLocation(),this.camera.getScreenToWorldPoint(e,e))},e.prototype.onEndDrag=function(){var t=r.default.instance.levelEditor.editorPanel.getBoundingBoxToWorld(),e=this.node.getBoundingBoxToWorld(),o=this.node.parent.convertToWorldSpaceAR(this.node.getPosition());if(!t.containsRect(e)){var n=s.default.fitRectInArea(t,e),i=o.sub(e.origin);o=n.add(i)}var c=this.camera.getWorldToScreenPoint(o),a=cc.v2(c.x,c.y);a=r.default.instance.levelEditor.snapToGrid(a),this.node.setPosition(this.node.parent.convertToNodeSpaceAR(a));var l=(a=this.node.getPosition()).sub(this.point1);this.point1=a,this.point2=this.point2.add(l),this.id>1&&(r.default.instance.levelEditor.trashBin.hide(),this.combine()),this.playRandomSound(this.dropSounds)},e.prototype.onCreate=function(t,e){this.point1=t,this.point2=e;var o=e.sub(t);this.node.width=o.mag()+32,this.node.anchorX=16/this.node.width,this.node.setPosition(t);var n=-o.signAngle(cc.Vec2.RIGHT);this.node.angle=cc.misc.radiansToDegrees(n);var i=this.node.getComponent(cc.PhysicsBoxCollider);i&&(i.size=this.node.getContentSize(),i.offset=cc.v2(this.node.width/2-16,0),i.apply()),r.default.instance.levelEditor.editing&&this.playRandomSound(this.dragSounds),this.combine()},e.prototype.combine=function(){var t=this,e=this.point1.y<this.point2.y?this.point1:this.point2;e=this.node.parent.convertToWorldSpaceAR(e),r.default.instance.ground.intersectPoint(e)&&(this.getComponent(cc.RigidBody).type=cc.RigidBodyType.Kinematic);for(var o=r.default.instance.levelEditor.obstacles,n=function(e){var n=o[e],c=cc.v2(0,0),r=i.point1,l=i.fixedLength<0?i.point2:s.default.getFixedPointOnLine(i.fixedLength,i.point1,i.point2),p=n.point1,d=n.fixedLength<0?n.point2:s.default.getFixedPointOnLine(n.fixedLength,p,n.point2);if(s.default.cross(r.x,r.y,l.x,l.y,p.x,p.y,d.x,d.y,c)){var u=!1;null!=n.pins&&n.pins.forEach(function(e){e.joint instanceof cc.WheelJoint&&e.node.parent.convertToWorldSpaceAR(e.node.getPosition()).equals(t.node.parent.convertToWorldSpaceAR(c))&&(t.toLayer("obstaclesFront"),e.obstacles[0].toLayer("obstaclesBack"),e.obstacles[0].getComponent(cc.PhysicsCircleCollider).enabled=!1,n.toLayer("obstaclesBack"),u=!0)}),u?a.default.create(i,n,i.node.parent.convertToWorldSpaceAR(c),a.PinType.Revolute):a.default.create(i,n,i.node.parent.convertToWorldSpaceAR(c))}},i=this,c=4;c<o.length-1;c++)n(c)},e.prototype.onBeginContact=function(t,e,o){var n=this;if(!o.sensor&&this.canCollide){var i=e.body.linearVelocity.sub(o.body.linearVelocity).mag();i>500&&(this.playRandomSound(this.dropSounds,i/2e3),this.canCollide=!1,this.scheduleOnce(function(){n.canCollide=!0},.5))}},e.prototype.onExplosionDamage=function(t,e){var o=this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),n=cc.director.getPhysicsManager().rayCast(t,o,cc.RayCastType.AllClosest),i=!1;n.forEach(function(t){i=i||"metal"==t.collider.node.name}),i||this.pins.forEach(function(o){var n=o.node.parent.convertToWorldSpaceAR(o.node.getPosition());cc.Vec2.distance(n,t)<e&&o.remove()})},e.prototype.reset=function(){this.node.setPosition(this.point1)},e.prototype.playRandomSound=function(t,e){if(void 0===e&&(e=1),t.length>0){var o=t[this.getRandomInt(0,t.length)],n=cc.audioEngine.playEffect(o,!1);e<1&&cc.audioEngine.setVolume(n,e)}},e.prototype.getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t))+t},e.prototype.getInfo=function(){var t=r.default.instance.levelEditor.cellSize,e=this.point1.div(t),o=this.point2.div(t);return new l.default(this.id,e,o)},e.prototype.onDestroy=function(){this.interactive&&null!=this.target&&(this.target.target=null)},c([u],e.prototype,"id",void 0),c([u],e.prototype,"interactive",void 0),c([u(cc.Node),u({visible:function(){return this.interactive}})],e.prototype,"coloredNode",void 0),c([u],e.prototype,"fixedLength",void 0),c([u(cc.AudioClip)],e.prototype,"dragSounds",void 0),c([u(cc.AudioClip)],e.prototype,"dropSounds",void 0),c([d],e)}(cc.Component);o.default=h,cc._RF.pop()},{"../Game":"Game","../Global/Utils":"Utils","../Level/Pin":"Pin","../Obstacles/ObstacleInfo":"ObstacleInfo"}],OverviewTarget:[function(t,e,o){"use strict";cc._RF.push(e,"46a18e9UzxGY7hDspDyOXal","OverviewTarget");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.target=null,e.followSpeed=1,e.followTarget=!1,e.offset=cc.Vec2.ZERO,e}return i(e,t),e.prototype.start=function(){this.setPosition(this.node.getPosition())},e.prototype.reset=function(){this.followTarget=!1},e.prototype.setPosition=function(t){this.startPosition=t,this.node.setPosition(t)},e.prototype.update=function(t){if(this.followTarget&&null!=this.target){var e=this.node.getPosition(),o=this.target.parent.convertToWorldSpaceAR(this.target.getPosition());if(cc.Vec2.squaredDistance(e,o)>.01){var n=e;this.node.setPosition(cc.Vec2.lerp(n,e,o,t*this.followSpeed))}}else e=this.node.getPosition(),o=this.startPosition.add(this.offset),cc.Vec2.squaredDistance(e,o)>.01&&(n=e,this.node.setPosition(cc.Vec2.lerp(n,e,o,t*this.followSpeed)))},c([a(cc.Node)],e.prototype,"target",void 0),c([a],e.prototype,"followSpeed",void 0),c([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],PauseMenu:[function(t,e,o){"use strict";cc._RF.push(e,"e84dcFnibBLLrzo1H0SlXHs","PauseMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Level/LevelEditor"),a=cc._decorator,l=a.ccclass,p=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.level=null,e}return i(e,t),e.prototype.open=function(){r.default.instance.gameMenu.close(),r.default.instance.pause(),this.unscheduleAllCallbacks(),cc.Canvas.instance.fitHeight=!1,cc.Canvas.instance.fitWidth=!0,this.node.active=!0,cc.Canvas.instance.getComponent(cc.Widget).updateAlignment(),this.level.string="Level "+(s.default.activeLevel+1).toString(),cc.tween(this.node).set({opacity:0}).to(.1,{opacity:255}).start()},e.prototype.close=function(){r.default.instance.gameMenu.open(),r.default.instance.resume(),cc.Canvas.instance.fitHeight=!0,cc.Canvas.instance.fitWidth=!1,this.node.active=!1,cc.Canvas.instance.getComponent(cc.Widget).updateAlignment()},e.prototype.promoURL=function(t,e){switch(+e){default:cc.sys.openURL("https://play.google.com/store/apps/details?id=com.ankiv.knifethrow");break;case 1:cc.sys.openURL("https://play.google.com/store/apps/details?id=com.ankiv.redrun");break;case 2:cc.sys.openURL("https://play.google.com/store/apps/details?id=com.ankiv.cubie")}},c([p(cc.Label)],e.prototype,"level",void 0),c([l],e)}(cc.Component);o.default=d,cc._RF.pop()},{"../Game":"Game","../Level/LevelEditor":"LevelEditor"}],Pin:[function(t,e,o){"use strict";cc._RF.push(e,"e802fCvKJxKypR3+uHAi7sH","Pin");var n,i,c=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),r=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.PinType=void 0,function(t){t[t.Weld=0]="Weld",t[t.Revolute=1]="Revolute",t[t.Wheel=2]="Wheel",t[t.MotorWheel=3]="MotorWheel"}(i=o.PinType||(o.PinType={}));var s=t("../Game"),a=cc._decorator,l=a.ccclass,p=(a.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.obstacles=[],e.joint=null,e}var o;return c(e,t),o=e,e.create=function(t,e,n,c,r){void 0===c&&(c=i.Weld),void 0===r&&(r=t.node);var a=new cc.Node("pin"),l=a.addComponent(o);l.obstacles.push(t,e),t.pins.push(l),e.pins.push(l),a.parent=r,a.setPosition(r.convertToNodeSpaceAR(n));var p=s.default.instance.levelEditor.pin;switch(l.addComponent(cc.Sprite).spriteFrame=p,a.setContentSize(cc.size(16,16)),c){default:l.joint=r.addComponent(cc.WeldJoint),l.joint.referenceAngle=t.node.angle-e.node.angle;break;case i.Revolute:l.joint=r.addComponent(cc.RevoluteJoint),l.joint.referenceAngle=t.node.angle-e.node.angle;break;case i.Wheel:l.joint=r.addComponent(cc.WheelJoint),l.joint.frequency=20,l.joint.dampingRatio=1;break;case i.MotorWheel:l.joint=r.addComponent(cc.WheelJoint),l.joint.frequency=20,l.joint.dampingRatio=1,l.joint.enableMotor=!0,l.joint.motorSpeed=500,l.joint.maxMotorTorque=1e3}l.joint.anchor=r.convertToNodeSpaceAR(n),l.joint.connectedAnchor=e.node.convertToNodeSpaceAR(n),l.joint.connectedBody=e.getComponent(cc.RigidBody)},e.prototype.remove=function(){var t=this;this.obstacles.forEach(function(e){e.pins.splice(e.pins.indexOf(t),1),e.onPinRemoved()}),this.joint.destroy(),this.node.destroy()},o=r([l],e)}(cc.Component));o.default=p,cc._RF.pop()},{"../Game":"Game"}],Rope:[function(t,e,o){"use strict";cc._RF.push(e,"d5255XgkwpCj4WPxefmpeTi","Rope");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Global/Utils"),a=t("../Level/Pin"),l=t("./Obstacle"),p=cc._decorator,d=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.minSegmentLength=32,e.graph=null,e.segments=[],e.ropeJoint=null,e}return i(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this.graph=this.getComponent(cc.Graphics)},e.prototype.update=function(){var t=this.segments;if(0!=t.length){var e=this.graph;e.clear(),e.moveTo(t[0].x,t[0].y),this.segments[this.segments.length-1];for(var o=this.getEndPoint(),n=0;n<t.length;n++){var i=t[n],c=n+2>t.length?o:t[n+1],r=i.x+.5*(c.x-i.x),s=i.y+.5*(c.y-i.y);e.quadraticCurveTo(i.x,i.y,r,s)}e.quadraticCurveTo(o.x,o.y,o.x,o.y),e.stroke()}},e.prototype.combine=function(){for(var t=r.default.instance.levelEditor.obstacles,e=4;e<t.length-1;e++){var o=t[e];s.default.minDistanceBetweenLineAndPoint(o.point1,o.point2,this.point1)<16&&a.default.create(this,o,this.node.parent.convertToWorldSpaceAR(this.point1),a.PinType.Revolute,this.segments[0])}for(e=4;e<t.length-1;e++)o=t[e],s.default.minDistanceBetweenLineAndPoint(o.point1,o.point2,this.point2)<16&&a.default.create(this,o,this.node.parent.convertToWorldSpaceAR(this.point2),a.PinType.Revolute,this.segments[this.segments.length-1]);if(this.pins.length>1){var n=this.pins[0].obstacles[1],i=this.pins[1].obstacles[1];this.ropeJoint=n.addComponent(cc.RopeJoint),this.ropeJoint.connectedBody=i.getComponent(cc.RigidBody),this.ropeJoint.anchor=n.node.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.point1)),this.ropeJoint.connectedAnchor=i.node.convertToNodeSpaceAR(this.node.parent.convertToWorldSpaceAR(this.point2)),this.ropeJoint.collideConnected=!0,this.ropeJoint.maxLength=1.1*this.node.width}},e.prototype.getEndPoint=function(){var t=this.segments[this.segments.length-1],e=cc.misc.degreesToRadians(t.angle),o=t.x,n=t.y,i=t.width;return cc.v2(i*Math.cos(e)+o,i*Math.sin(e)+n)},e.prototype.onCreate=function(t,e){this.point1=t,this.point2=e;var o=e.sub(t);this.node.width=o.mag(),this.node.anchorX=0,this.node.setPosition(t);var n=-cc.v2(o).signAngle(cc.Vec2.RIGHT);this.node.angle=cc.misc.radiansToDegrees(n),r.default.instance.levelEditor.editing&&this.playRandomSound(this.dragSounds),r.default.instance.levelEditor.editing?this.drawRope():this.createRope(),this.combine()},e.prototype.onPinRemoved=function(){t.prototype.onPinRemoved.call(this),null!=this.ropeJoint&&this.ropeJoint.destroy()},e.prototype.createRope=function(){for(var t=this.node.width,e=Math.floor(t/this.minSegmentLength),o=cc.size(t/e,this.graph.lineWidth),n=0;n<e;n++){var i=n*o.width,c=new cc.Node("ropeSegment-"+n.toString());this.segments.push(c),c.setContentSize(o),c.setAnchorPoint(0,.5),c.setParent(this.node),c.setPosition(i,0),c.addComponent(cc.RigidBody).gravityScale=3;var r=c.addComponent(cc.PhysicsBoxCollider);if(r.size=o,r.offset=cc.v2(o.width/2,0),r.apply(),n>0){var s=c.addComponent(cc.RevoluteJoint);s.connectedBody=this.segments[n-1].getComponent(cc.RigidBody),s.connectedAnchor=cc.v2(o.width,0)}}},e.prototype.drawRope=function(){var t=this.graph;t.clear(),t.moveTo(0,0),t.lineTo(this.node.width,0),t.stroke()},c([u],e.prototype,"minSegmentLength",void 0),c([u(cc.Graphics)],e.prototype,"graph",void 0),c([u([cc.Node])],e.prototype,"segments",void 0),c([d],e)}(l.default);o.default=h,cc._RF.pop()},{"../Game":"Game","../Global/Utils":"Utils","../Level/Pin":"Pin","./Obstacle":"Obstacle"}],Scoreboard:[function(t,e,o){"use strict";cc._RF.push(e,"91f19sO3qVMjqE83FANeH43","Scoreboard");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Level/Level"),a=t("../Level/LevelEditor"),l=cc._decorator,p=l.ccclass,d=l.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOpen=!1,e.animation=null,e.win=null,e.loose=null,e.stars=[],e.nextButton=null,e.editButton=null,e.homeButton=null,e}return i(e,t),e.prototype.nextLevel=function(){a.default.activeLevel+=1,r.default.instance.levelEditor.loadLevel(s.default.getLevel(a.default.activeLevel).getCode()),r.default.instance.restart(),this.close()},e.prototype.restart=function(){r.default.instance.restart(),this.close()},e.prototype.home=function(){cc.director.loadScene("Menu")},e.prototype.open=function(){var t=r.default.instance;t.gameMenu.close();var e=t.monster.isDead;if(a.default.editMode?(this.nextButton.active=!1,this.homeButton.active=!1,this.editButton.active=!0):(s.default.getLevel(a.default.activeLevel+1).getCode()==s.default.getLevel(0).getCode()&&(this.homeButton.active=!0),this.nextButton.active=!this.homeButton.active,this.editButton.active=!1),!e)return t.restart(),void cc.audioEngine.playEffect(this.loose,!1);cc.audioEngine.playEffect(this.win,!1),this.node.active=!0,this.node.children[2].scale=1,this.isOpen=!0,this.animation.playAdditive("scoreboardOpen");for(var o=r.default.instance.starsCollected,n=0;n<3;n++)this.stars[n].active=n<o},e.prototype.close=function(){r.default.instance.gameMenu.open(),this.isOpen&&(this.animation.playAdditive("scoreboardClose"),this.isOpen=!1)},c([d(cc.Animation)],e.prototype,"animation",void 0),c([d(cc.AudioClip)],e.prototype,"win",void 0),c([d(cc.AudioClip)],e.prototype,"loose",void 0),c([d([cc.Node])],e.prototype,"stars",void 0),c([d(cc.Node)],e.prototype,"nextButton",void 0),c([d(cc.Node)],e.prototype,"editButton",void 0),c([d(cc.Node)],e.prototype,"homeButton",void 0),c([p],e)}(cc.Component);o.default=u,cc._RF.pop()},{"../Game":"Game","../Level/Level":"Level","../Level/LevelEditor":"LevelEditor"}],SettingsMenu:[function(t,e,o){"use strict";cc._RF.push(e,"8b59cprz1FEK66oJGozdZNE","SettingsMenu");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.musicSwitch=null,e.soundSwitch=null,e.musicOnSprite=null,e.musicOffSprite=null,e.soundOnSprite=null,e.soundOffSprite=null,e.soundOff=!1,e.musicOff=!1,e}return i(e,t),e.prototype.start=function(){this.soundOff=0==cc.sys.localStorage.getItem("soundVolume"),this.musicOff=0==cc.sys.localStorage.getItem("musicVolume"),this.soundSwitch.spriteFrame=this.soundOff?this.soundOffSprite:this.soundOnSprite,this.musicSwitch.spriteFrame=this.musicOff?this.musicOffSprite:this.musicOnSprite},e.prototype.open=function(){this.node.active=!0},e.prototype.close=function(){this.node.active=!1},e.prototype.clearData=function(){cc.sys.localStorage.clear()},e.prototype.switchSound=function(){this.soundSwitch.spriteFrame=this.soundOff?this.soundOnSprite:this.soundOffSprite,this.soundOff=!this.soundOff,cc.sys.localStorage.setItem("soundVolume",this.soundOff?0:1),cc.audioEngine.setEffectsVolume(this.soundOff?0:1)},e.prototype.switchMusic=function(){this.musicSwitch.spriteFrame=this.musicOff?this.musicOnSprite:this.musicOffSprite,this.musicOff=!this.musicOff,cc.sys.localStorage.setItem("musicVolume",this.musicOff?0:1),cc.audioEngine.setMusicVolume(this.musicOff?0:1)},c([a(cc.Sprite)],e.prototype,"musicSwitch",void 0),c([a(cc.Sprite)],e.prototype,"soundSwitch",void 0),c([a(cc.SpriteFrame)],e.prototype,"musicOnSprite",void 0),c([a(cc.SpriteFrame)],e.prototype,"musicOffSprite",void 0),c([a(cc.SpriteFrame)],e.prototype,"soundOnSprite",void 0),c([a(cc.SpriteFrame)],e.prototype,"soundOffSprite",void 0),c([s],e)}(cc.Component);o.default=l,cc._RF.pop()},{}],Spikes:[function(t,e,o){"use strict";cc._RF.push(e,"88b903MW51Cn7NaZJXOgbtb","Spikes");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("./Monster"),s=t("./Obstacle"),a=cc._decorator,l=a.ccclass,p=a.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spikes=null,e}return i(e,t),e.prototype.onCreate=function(e,o){t.prototype.onCreate.call(this,e,o);var n=this.node.width%32;this.spikes.x=n/2,this.spikes.width=this.node.width-32-this.node.width%32},e.prototype.onBeginContact=function(e,o,n){var i=this;if(t.prototype.onBeginContact.call(this,e,o,n),!n.sensor){var c=o.body.linearVelocity.sub(n.body.linearVelocity),s=cc.v3(c);if(!(this.node.up.angle(s)>1)&&"monster"===n.node.name&&c.mag()>200){var a=e.getWorldManifold().points;n.node.getComponent(r.default).onBombExploded(a[0]),a.forEach(function(t){var e=i.node.addComponent(cc.DistanceJoint);e.connectedBody=n.getComponent(cc.RigidBody),e.distance=5,e.anchor=o.node.convertToNodeSpaceAR(t),e.connectedAnchor=n.node.convertToNodeSpaceAR(t),e.collideConnected=!0})}}},c([p(cc.Node)],e.prototype,"spikes",void 0),c([l],e)}(s.default);o.default=d,cc._RF.pop()},{"./Monster":"Monster","./Obstacle":"Obstacle"}],Spring:[function(t,e,o){"use strict";cc._RF.push(e,"515ccLx8MxIUJ25sPkMC/n2","Spring");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Global/Utils"),a=t("../Level/Pin"),l=t("./Obstacle"),p=cc._decorator,d=p.ccclass,u=p.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cap=null,e.spring=null,e.target=null,e.activated=!1,e}return i(e,t),e.prototype.onCreate=function(t,e){this.point1=t,this.point2=e;var o=e.sub(t);this.node.setPosition(t);var n=-o.signAngle(cc.Vec2.RIGHT);this.node.angle=cc.misc.radiansToDegrees(n),this.combine(),r.default.instance.levelEditor.editing&&this.playRandomSound(this.dragSounds),this.unparentCap()},e.prototype.onEndDrag=function(e){t.prototype.onEndDrag.call(this,e),this.unparentCap()},e.prototype.update=function(){if(this.activated){var t=this.cap.parent.convertToWorldSpaceAR(this.cap.getPosition()),e=this.spring.parent.convertToWorldSpaceAR(this.spring.getPosition()),o=cc.Vec2.distance(t,e);this.spring.scaleY=o/this.spring.height}},e.prototype.onTouchStart=function(e){t.prototype.onTouchStart.call(this,e);var o=this.cap.parent.convertToWorldSpaceAR(this.cap.getPosition());this.cap.setParent(this.node),this.cap.angle=0,this.cap.setPosition(this.node.convertToNodeSpaceAR(o))},e.prototype.activate=function(){this.activated||(cc.audioEngine.playEffect(this.dropSounds[0],!1),this.activated=!0,this.cap.getComponent(cc.PrismaticJoint).enabled=!0,this.cap.getComponent(cc.WeldJoint)&&this.cap.getComponent(cc.WeldJoint).destroy())},e.prototype.unparentCap=function(){var t=this.node.convertToWorldSpaceAR(this.cap.getPosition());this.cap.setParent(this.node.parent),this.cap.angle=this.node.angle,this.cap.setPosition(this.node.parent.convertToNodeSpaceAR(t))},e.prototype.combine=function(){for(var t=r.default.instance.levelEditor.obstacles,e=4;e<t.length-1;e++){var o=t[e];s.default.minDistanceBetweenLineAndPoint(o.point1,o.point2,this.point1)<16&&a.default.create(this,o,this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),a.PinType.Weld)}},e.prototype.onDestroy=function(){t.prototype.onDestroy.call(this),this.cap.destroy()},c([u(cc.Node)],e.prototype,"cap",void 0),c([u(cc.Node)],e.prototype,"spring",void 0),c([d],e)}(l.default);o.default=h,cc._RF.pop()},{"../Game":"Game","../Global/Utils":"Utils","../Level/Pin":"Pin","./Obstacle":"Obstacle"}],Star:[function(t,e,o){"use strict";cc._RF.push(e,"04134h/r4NLPqlSpXMCXPX+","Star");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("./Obstacle"),a=cc._decorator,l=a.ccclass,p=(a.property,cc.tween),d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.active=!1,e.tween=null,e}return i(e,t),e.prototype.start=function(){t.prototype.start.call(this),this.appear()},e.prototype.appear=function(){var t=this;this.tween=p(this.node).set({opacity:0,scale:2,angle:0}).to(.25,{opacity:255,scale:1}).start(),this.scheduleOnce(function(){t.active=!0},.25)},e.prototype.reset=function(){var e;this.unscheduleAllCallbacks(),t.prototype.reset.call(this),null===(e=this.tween)||void 0===e||e.stop(),this.enabled=!0,this.active=!1,this.appear()},e.prototype.onBeginContact=function(){this.active&&(this.pickUp(),this.active=!1)},e.prototype.pickUp=function(){this.enabled=!1,r.default.instance.starsCollected++,this.getComponent(cc.AudioSource).play(),this.tween=p(this.node).to(.5,{opacity:0,scale:2}).start()},c([l],e)}(s.default);o.default=d,cc._RF.pop()},{"../Game":"Game","./Obstacle":"Obstacle"}],ThrowZone:[function(t,e,o){"use strict";cc._RF.push(e,"4b653tPzjZAmpYU2j4ca+8e","ThrowZone");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=r.property,l=t("./Game"),p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.arrow=null,e.touchNode=null,e.finger=null,e.nodes=[],e.nodeCount=8,e.bomb=null,e}return i(e,t),e.prototype.start=function(){this.bomb=l.default.instance.grenade,this.node.on(cc.Node.EventType.TOUCH_START,this.startThrow,this),this.node.on(cc.Node.EventType.TOUCH_END,this.throw,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.updateNodes,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.throw,this)},e.prototype.startThrow=function(t){if(this.bomb.prepare(),this.arrow.active=!1,this.finger.active=!0,this.touchNode.active=!1,this.arrow.position=cc.v3(t.getLocationX(),t.getLocationY(),0),this.finger.position=cc.v3(t.getLocationX(),t.getLocationY(),0),this.nodes.length<this.nodeCount){this.nodes=new Array(this.nodeCount),this.nodes[0]=this.touchNode;for(var e=1;e<this.nodes.length;e++)this.nodes[e]=cc.instantiate(this.touchNode),this.nodes[e].parent=this.node}},e.prototype.updateNodes=function(t){this.finger.position=cc.v3(t.getLocationX(),t.getLocationY(),0);var e=this.arrow.position.sub(this.finger.position),o=e.mag(),n=o>40;n&&(this.bomb.ignited||this.bomb.ignite()),this.arrow.active=n,this.nodes.forEach(function(t){t.active=n}),this.arrow.getChildByName("Arrow2").getComponent(cc.Sprite).fillRange=cc.misc.lerp(0,1,o/300);var i=-cc.v2(e).signAngle(cc.v2(1,0));this.arrow.angle=cc.misc.radiansToDegrees(i);for(var c=0;c<this.nodes.length;c++){var r=this.finger.position.add(e.normalize().mul(o/this.nodeCount*c));this.nodes[c].position=r,this.nodes[c].scale=cc.misc.clamp01(o/300)}},e.prototype.throw=function(){if(this.finger.position.sub(this.arrow.position).mag()<40)this.cancelThrow();else{var t=cc.v3(this.arrow.position.sub(this.finger.position)).mul(1e3);this.node.active=!1,this.bomb.throw(t),this.arrow.active=!1,this.finger.active=!1;for(var e=0;e<this.nodeCount;e++)this.nodes[e].active=!1;l.default.instance.onThrow()}},e.prototype.cancelThrow=function(){this.arrow.active=!1,this.finger.active=!1;for(var t=0;t<this.nodes.length;t++)this.nodes[t].active=!1;this.bomb.extinguish()},c([a(cc.Node)],e.prototype,"arrow",void 0),c([a(cc.Node)],e.prototype,"touchNode",void 0),c([a(cc.Node)],e.prototype,"finger",void 0),c([a],e.prototype,"nodeCount",void 0),c([s],e)}(cc.Component);o.default=p,cc._RF.pop()},{"./Game":"Game"}],TrashBin:[function(t,e,o){"use strict";cc._RF.push(e,"34acbJBQplNup1QBc7NiAHq","TrashBin");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,s=r.ccclass,a=(r.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.anim=null,e.opened=!1,e.selected=null,e.camera=null,e}return i(e,t),e.prototype.onLoad=function(){this.camera=cc.Camera.main,this.anim=this.getComponent(cc.Animation),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this.onKeyDown,this)},e.prototype.onKeyDown=function(t){t.keyCode==cc.macro.KEY.Delete&&this.removeSelectedObstacle()},e.prototype.removeSelectedObstacle=function(){null!=this.selected&&(this.selected.remove(),this.hide())},e.prototype.open=function(){this.opened=!0,this.anim.play("open").wrapMode=cc.WrapMode.Normal},e.prototype.close=function(){this.opened=!1,this.anim.play("open").wrapMode=cc.WrapMode.Reverse},e.prototype.update=function(){if(null!=this.selected){var t=this.selected.node.getPosition().add(this.selected.dragOffset);cc.Vec2.distance(this.node.getPosition(),t)<66/this.camera.zoomRatio?this.opened||this.open():this.opened&&this.close()}},e.prototype.show=function(t){this.selected=t,this.node.active=!0;var e=cc.Camera.main.zoomRatio;this.node.setScale(1/e);var o=cc.v2(75,cc.winSize.height-75);cc.Camera.main.getScreenToWorldPoint(o,o),this.node.setPosition(this.node.parent.convertToNodeSpaceAR(o)),this.anim.play("show").wrapMode=cc.WrapMode.Normal},e.prototype.hide=function(){this.opened?(this.opened=!1,this.anim.play("delete"),this.selected.remove()):this.anim.play("show").wrapMode=cc.WrapMode.Reverse,this.selected=null},c([s],e)}(cc.Component));o.default=a,cc._RF.pop()},{}],UserData:[function(t,e,o){"use strict";cc._RF.push(e,"d42f3M9um5D2Y91fWWMmTV1","UserData"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(t){this.stars=t?t.stars:new Array,this.userStars=t&&t.userStars?t.userStars:new Array,this.userLevels=t?t.userLevels:new Array}return t.prototype.save=function(){cc.sys.localStorage.setItem("userData",JSON.stringify(this))},Object.defineProperty(t,"loaded",{get:function(){return null==t._loaded&&(t._loaded=new t(JSON.parse(cc.sys.localStorage.getItem("userData"))),null==t._loaded&&(t._loaded=new t)),t._loaded},enumerable:!1,configurable:!0}),t.prototype.totalStars=function(){var t=0;return this.stars.forEach(function(e){t+=e}),t},t.prototype.setStars=function(t,e){var o=null!=this.stars[t]?this.stars[t]:0;this.stars[t]=e>o?e:o,this.save()},t.prototype.setUserStars=function(t,e){var o=null!=this.userStars[t]?this.userStars[t]:0;this.userStars[t]=e>o?e:o,this.save()},t.prototype.saveUserLevel=function(t,e){var o=this.userLevels[t];null!=o&&o!==e&&(this.userStars[t]=0),this.userLevels[t]=e,this.save()},t.prototype.getUserLevel=function(t){return this.userLevels[t]},t}();o.default=n,cc._RF.pop()},{}],Utils:[function(t,e,o){"use strict";cc._RF.push(e,"ce162JsKfVLKo0iA1HIKb+5","Utils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.minDistanceBetweenLineAndPoint=function(t,e,o){var n=cc.Vec2.squaredDistance(t,e);if(0==n)return cc.Vec2.distance(o,t);var i=Math.max(0,Math.min(1,cc.Vec2.dot(o.sub(t),e.sub(t))/n)),c=t.add(e.sub(t).mul(i));return cc.Vec2.distance(o,c)},t.cross=function(t,e,o,n,i,c,r,s,a){var l,p,d,u,h,f;return f=((d=r-i)*(e-c)-(u=s-c)*(t-i))/(-d*(p=n-e)+(l=o-t)*u),(h=(-p*(t-i)+l*(e-c))/(-d*p+l*u))>=0&&h<=1&&f>=0&&f<=1&&(a&&(a.x=t+f*l,a.y=e+f*p),!0)},t.fitRectInArea=function(t,e){var o=e.origin;return e.xMin<t.xMin&&(o=cc.v2(t.xMin,o.y)),e.xMax>t.xMax&&(o=cc.v2(t.xMax-e.width,o.y)),e.yMin<t.yMin&&(o=cc.v2(o.x,t.yMin)),e.yMax>t.yMax&&(o=cc.v2(o.x,t.yMax-e.height)),o},t.getFixedPointOnLine=function(t,e,o){var n=o.sub(e).normalizeSelf().mul(t);return e.add(n)},t.browserCopyTextToClipboard=function(t){navigator.clipboard?navigator.clipboard.writeText(t).then(function(){console.log("Async: Copying to clipboard was successful!")},function(t){console.error("Async: Could not copy text: ",t)}):this.fallbackCopyTextToClipboard(t)},t.fallbackCopyTextToClipboard=function(t){var e=document.createElement("textarea");e.value=t,e.style.top="0",e.style.left="0",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{var o=document.execCommand("copy")?"successful":"unsuccessful";console.log("Fallback: Copying text command was "+o)}catch(n){console.error("Fallback: Oops, unable to copy",n)}document.body.removeChild(e)},t}();o.default=n,cc._RF.pop()},{}],Wheel:[function(t,e,o){"use strict";cc._RF.push(e,"29f45mJBLBMLrRqzjTfPmGi","Wheel");var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),c=this&&this.__decorate||function(t,e,o,n){var i,c=arguments.length,r=c<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,n);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(c<3?i(r):c>3?i(e,o,r):i(e,o))||r);return c>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=t("../Game"),s=t("../Global/Utils"),a=t("../Level/Pin"),l=t("./Obstacle"),p=cc._decorator,d=p.ccclass,u=(p.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isHinge=!1,e}return i(e,t),e.prototype.onCreate=function(t){this.point1=t,this.point2=t,this.node.setPosition(t),r.default.instance.levelEditor.editing&&this.playRandomSound(this.dropSounds),this.combine()},e.prototype.combine=function(){for(var t=r.default.instance.levelEditor.obstacles,e=4;e<t.length-1;e++){var o=t[e];s.default.minDistanceBetweenLineAndPoint(o.point1,o.point2,this.point1)<16&&a.default.create(this,o,this.node.parent.convertToWorldSpaceAR(this.node.getPosition()),a.PinType.Wheel)}},c([d],e)}(l.default));o.default=u,cc._RF.pop()},{"../Game":"Game","../Global/Utils":"Utils","../Level/Pin":"Pin","./Obstacle":"Obstacle"}]},{},["Background","CameraController","CollisionContactListener","Explosion","Game","UserData","Utils","Grenade","Ground","Level","LevelEditor","Pin","TrashBin","Menu","Activator","Cannon","Monster","Obstacle","ObstacleInfo","Rope","Spikes","Spring","Star","Wheel","OverviewTarget","ThrowZone","ChooseLevel","CodeMenu","EditorMenu","FullScreenButton","GameMenu","LevelFrame","PauseMenu","Scoreboard","SettingsMenu"]);